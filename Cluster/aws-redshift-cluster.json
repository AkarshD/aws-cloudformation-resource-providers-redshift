{
    "typeName": "AWS::Redshift::Cluster",
    "description": "An example resource schema demonstrating some basic constructs and validation rules.",
    "sourceUrl": "https://github.com/aws-cloudformation/aws-cloudformation-rpdk.git",
    "definitions": {
        "Tag": {
            "description": "A key-value pair to associate with a resource.",
            "type": "object",
            "properties": {
                "Key": {
                    "type": "string",
                    "description": "The key name of the tag. You can specify a value that is 1 to 127 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.",
                    "minLength": 1,
                    "maxLength": 127
                },
                "Value": {
                    "type": "string",
                    "description": "The value for the tag. You can specify a value that is 1 to 255 Unicode characters in length and cannot be prefixed with aws:. You can use any of the following characters: the set of Unicode letters, digits, whitespace, _, ., /, =, +, and -.",
                    "minLength": 1,
                    "maxLength": 255
                }
            },
            "required": [
                "Value",
                "Key"
            ]
        }
    },
    "properties": {
        "ClusterIdentifier": {
            "description": "A unique identifier for the cluster. You use this identifier to refer to the cluster for any subsequent cluster operations such as deleting or modifying. All alphabetical characters must be lower case, no hypens at the end, no two consecutive hyphens. Cluster name should be unique for all clusters within an AWS account",
            "type": "string",
            "maximum": 63
        },
        "MasterUsername": {
            "description": "The user name associated with the master user account for the cluster that is being created. The user name can't be PUBLIC and first character must be a letter.",
            "type": "string",
            "maximum": 128
        },
        "MasterUserPassword": {
            "description": "The password associated with the master user account for the cluster that is being created. Password must be between 8 and 64 characters in length, should have at least one uppercase letter.Must contain at least one lowercase letter.Must contain one number.Can be any printable ASCII character.",
            "type": "string",
            "maximum": 64
        },
        "NodeType": {
            "description": "The node type to be provisioned for the cluster.Valid Values: ds2.xlarge | ds2.8xlarge | dc1.large | dc1.8xlarge | dc2.large | dc2.8xlarge | ra3.4xlarge | ra3.16xlarge",
            "type": "string"
        },
        "AdditionalInfo": {
            "description": "Reserved",
            "type": "string"
        },
        "AllowVersionUpgrade": {
            "description": "Major version upgrades can be applied during the maintenance window to the Amazon Redshift engine that is running on the cluster. Default value is True",
            "type": "boolean"
        },
        "AutomatedSnapshotRetentionPeriod": {
            "description": "The number of days that automated snapshots are retained. If the value is 0, automated snapshots are disabled. Default value is 1",
            "type": "integer"
        },
        "AvailabilityZone": {
            "description": "The EC2 Availability Zone (AZ) in which you want Amazon Redshift to provision the cluster. Default: A random, system-chosen Availability Zone in the region that is specified by the endpoint",
            "type": "string"
        },
        "ClusterParameterGroupName": {
            "description": "The name of the parameter group to be associated with this cluster.",
            "type": "string",
            "maximum": 255
        },
        "ClusterType": {
            "description": "The type of the cluster. When cluster type is specified as single-node, the NumberOfNodes parameter is not required and if multi-node, the NumberOfNodes parameter is required",
            "type": "string"
        },
        "ClusterVersion": {
            "description": "The version of the Amazon Redshift engine software that you want to deploy on the cluster.The version selected runs on all the nodes in the cluster.",
            "type": "string"
        },
        "DBName": {
            "description": "The name of the first database to be created when the cluster is created. To create additional databases after the cluster is created, connect to the cluster with a SQL client and use SQL commands to create a database.",
            "type": "string"
        },
        "ElasticIp": {
            "description": "The Elastic IP (EIP) address for the cluster.",
            "type": "string"
        },
        "ElasticIpStatus": {
            "description": "The status of the elastic IP (EIP) address.",
            "type": "string"
        },
        "ElasticResizeNumberOfNodeOptions" : {
            "description": "The number of nodes that you can resize the cluster to with the elastic resize method.",
            "type": "string"
        },
        "EndpointAddress" : {
            "description": "The DNS address of the Cluster.",
            "type": "string"
        },
        "EndpointPort" : {
            "description": "The DNS address of the Port.",
            "type": "integer"
        },
        "Encrypted": {
            "description": "If true, the data in the cluster is encrypted at rest.",
            "type": "boolean"
        },
        "EnhancedVpcRouting": {
            "description": "An option that specifies whether to create the cluster with enhanced VPC routing enabled. To create a cluster that uses enhanced VPC routing, the cluster must be in a VPC.",
            "type": "boolean"
        },
        "ExpectedNextSnapshotScheduleTime": {
            "description": "The date and time when the next snapshot is expected to be taken for clusters with a valid snapshot schedule and backups enabled.",
            "type": "string"
        },
        "ExpectedNextSnapshotScheduleTimeStatus": {
            "description": "The status of next expected snapshot for clusters having a valid snapshot schedule and backups enabled. Possible values are the following OnTrack, Pending",
            "type": "string"
        },
        "HsmStatus": {
            "description": "A value that reports whether the Amazon Redshift cluster has finished applying any hardware security module (HSM) settings changes specified in a modify cluster command. Values active, applying",
            "type": "string"
        },
        "HsmClientCertificateIdentifier": {
            "description": "Specifies the name of the HSM client certificate the Amazon Redshift cluster uses to retrieve the data encryption keys stored in an HSM",
            "type": "string"
        },
        "HsmConfigurationIdentifier": {
            "description": "Specifies the name of the HSM configuration that contains the information the Amazon Redshift cluster can use to retrieve and store keys in an HSM.",
            "type": "string"
        },
        "KmsKeyId": {
            "description": "The AWS Key Management Service (KMS) key ID of the encryption key that you want to use to encrypt data in the cluster.",
            "type": "string"
        },
        "MaintenanceTrackName": {
            "description": "An optional parameter for the name of the maintenance track for the cluster. If you don't provide a maintenance track name, the cluster is assigned to the current track.",
            "type": "string"
        },
        "ManualSnapshotRetentionPeriod": {
            "description": "The default number of days to retain a manual snapshot. If the value is -1, the snapshot is retained indefinitely. This setting doesn't change the retention period of existing snapshots.",
            "type": "integer"
        },
        "NumberOfNodes": {
            "description": "The number of compute nodes in the cluster. This parameter is required when the ClusterType parameter is specified as multi-node.",
            "type": "integer"
        },
        "Port": {
            "description": "The port number on which the cluster accepts incoming connections. The cluster is accessible only via the JDBC and ODBC connection strings",
            "type": "integer"
        },
        "PreferredMaintenanceWindow": {
            "description": "The weekly time range (in UTC) during which automated cluster maintenance can occur.",
            "type": "string"
        },
        "PubliclyAccessible": {
            "description": "If true, the cluster can be accessed from a public network.",
            "type": "boolean"
        },
        "AllowCancelResize": {
            "description": "A boolean value indicating if the resize operation can be cancelled.",
            "type": "boolean"
        },
        "ResizeType": {
            "description": "Returns the value ClassicResize.",
            "type": "string"
        },
        "CurrentRestoreRateInMegaBytesPerSecond": {
            "description": "The number of megabytes per second being transferred from the backup storage. Returns the average rate for a completed backup. This field is only updated when you restore to DC2 and DS2 node types.",
            "type": "number"
        },
        "RestoreProgressInMegaBytes": {
            "description": "The number of megabytes that have been transferred from snapshot storage. This field is only updated when you restore to DC2 and DS2 node types.",
            "type": "number"
        },
        "RestoreElapsedTimeInSeconds": {
            "description": "The amount of time an in-progress restore has been running, or the amount of time it took a completed restore to finish. This field is only updated when you restore to DC2 and DS2 node types.",
            "type": "number"
        },
        "RestoreEstimatedTimeToCompletionInSeconds": {
            "description": "The estimate of the time remaining before the restore will complete. Returns 0 for a completed restore. This field is only updated when you restore to DC2 and DS2 node types.",
            "type": "number"
        },
        "RestoreSnapshotSizeInMegaBytes": {
            "description": "The size of the set of snapshot data used to restore the cluster. This field is only updated when you restore to DC2 and DS2 node types..",
            "type": "number"
        },
        "RestoreStatus": {
            "description": " The status of the restore action. Returns starting, restoring, completed, or failed.",
            "type": "string"
        },
        "SnapshotScheduleIdentifier": {
            "description": "A unique identifier for the snapshot schedule.",
            "type": "string"
        },
        "SnapshotScheduleState": {
            "description": "The current state of the cluster snapshot schedule.",
            "type": "string"
        },
        "ClusterSecurityGroups": {
            "description": "A list of security groups to be associated with this cluster.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "IamRoles": {
            "description": "A list of AWS Identity and Access Management (IAM) roles that can be used by the cluster to access other AWS services. You must supply the IAM roles in their Amazon Resource Name (ARN) format. You can supply up to 10 IAM roles in a single request",
            "type": "array",
            "maxItems": 10,
            "items": {
                "type": "string"
            }
        },
        "IamRoleArn": {
            "description": "The Amazon Resource Name (ARN) of the IAM role.",
            "type": "string"
        },
        "IamRoleApplyStatus": {
            "description": "A value that describes the status of the IAM role's association with an Amazon Redshift cluster. Adding, Removing, In-sync",
            "type": "string"
        },
        "ModifyStatus": {
            "description": "The status of a modify operation, if any, initiated for the cluster.",
            "type": "string"
        },
        "NextMaintenanceWindowStartTime": {
            "description": "The date and time in UTC when system maintenance can begin.",
            "type": "string"
        },
        "Tags": {
            "description": "The list of tags for the cluster parameter group.",
            "type": "array",
            "maxItems": 50,
            "items": {
                "$ref": "#/definitions/Tag"
            }
        },
        "VpcSecurityGroupIds": {
            "description": "A list of Virtual Private Cloud (VPC) security groups to be associated with the cluster.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "FinalClusterSnapshotIdentifier": {
            "description": "The identifier of the final snapshot that is to be created immediately before deleting the cluster",
            "type": "string"
        },
        "FinalClusterSnapshotRetentionPeriod": {
            "description": "The number of days that a manual snapshot is retained. If the value is -1, the manual snapshot is retained indefinitely.",
            "type": "integer"
        },
        "SkipFinalClusterSnapshot": {
            "description": "Determines whether a final snapshot of the cluster is created before Amazon Redshift deletes the cluster. If true, a final cluster snapshot is not created. If false, a final cluster snapshot is created before the cluster is deleted.",
            "type": "boolean"
        },
        "Marker": {
            "description": "An optional parameter that specifies the starting point to return a set of response records. When the results of a DescribeClusters request exceed the value specified in MaxRecords, AWS returns a value in the Marker field of the response",
            "type": "string"
        },
        "MaxRecords": {
            "description": "The maximum number of response records to return in each call. If the number of remaining response records exceeds the specified MaxRecords value, a value is returned in a marker field of the response.",
            "type": "string"
        },
        "NewClusterIdentifier": {
            "description": "The new identifier for the cluster.",
            "type": "string"
        },
        "AddIamRoles": {
            "description": "Zero or more IAM roles to associate with the cluster. The roles must be in their Amazon Resource Name (ARN) format",
            "type": "array",
            "maxItems": 10,
            "items": {
                "type": "string"
            }
        },
        "RemoveIamRoles": {
            "description": "Zero or more IAM roles in ARN format to disassociate from the cluster. You can disassociate up to 10 IAM roles from a single cluster in a single request",
            "type": "array",
            "maxItems": 10,
            "items": {
                "type": "string"
            }
        },
        "RedshiftCommand": {
            "description": "The redshift API command",
            "type": "string"
        },
        "CurrentDatabaseRevision": {
            "description": "A string representing the current cluster version.",
            "type": "string"
        },
        "DatabaseRevisionReleaseDate": {
            "description": "The date on which the database revision was released.",
            "type": "string"
        },
        "RevisionTarget": {
            "description": "The identifier of the database revision. You can retrieve this value from the response to the DescribeClusterDbRevisions request.",
            "type": "string"
        },
        "RevisionTargets": {
            "description": "A list of RevisionTarget objects, where each object describes the database revision that a cluster can be updated to.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "DeferMaintenance": {
            "description": "A boolean indicating whether to enable the deferred maintenance window.",
            "type": "boolean"
        },
        "DeferMaintenanceDuration": {
            "description": "An integer indicating the duration of the maintenance window in days. If you specify a duration, you can't specify an end time. The duration must be 45 days or less.",
            "type": "integer"
        },
        "DeferMaintenanceEndTime": {
            "description": "A timestamp indicating end time for the deferred maintenance window. If you specify an end time, you can't specify a duration.",
            "type": "string"
        },
        "DeferMaintenanceStartTime": {
            "description": "A timestamp indicating start time for the deferred maintenance window.",
            "type": "string"
        },
        "DeferMaintenanceIdentifier": {
            "description": "A unique identifier for the deferred maintenance window.",
            "type": "string"
        },
        "DeferMaintenanceWindows": {
            "description": "A list of Deferred maintenance windows.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "SnapshotIdentifier": {
            "description": "The identifier of the snapshot whose setting you want to modify.",
            "type": "string"
        },
        "Force": {
            "description": "A Boolean option to override an exception if the retention period has already passed.",
            "type": "boolean"
        },
        "AccountsWithRestoreAccess": {
            "description": "A list of the AWS customer accounts authorized to restore the snapshot. Returns null if no accounts are authorized. Visible only to the snapshot owner.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "ActualIncrementalBackupSizeInMegaBytes": {
            "description": "The size of the incremental backup.",
            "type": "number"
        },
        "BackupProgressInMegaBytes": {
            "description": "The number of megabytes that have been transferred to the snapshot backup.",
            "type": "number"
        },
        "ClusterCreateTime": {
            "description": "The time (UTC) when the cluster was originally created.",
            "type": "string"
        },
        "CurrentBackupRateInMegaBytesPerSecond": {
            "description": "The number of megabytes per second being transferred to the snapshot backup. Returns 0 for a completed backup.",
            "type": "number"
        },
        "ElapsedTimeInSeconds": {
            "description": "The amount of time an in-progress snapshot backup has been running, or the amount of time it took a completed backup to finish.",
            "type": "number"
        },
        "EncryptedWithHSM": {
            "description": "A boolean that indicates whether the snapshot data is encrypted using the HSM keys of the source cluster. true indicates that the data is encrypted using HSM keys.",
            "type": "boolean"
        },
        "EstimatedSecondsToCompletion": {
            "description": "The estimate of the time remaining before the snapshot backup will complete. Returns 0 for a completed backup.",
            "type": "number"
        },
        "ManualSnapshotRemainingDays": {
            "description": "The number of days until a manual snapshot will pass its retention period.",
            "type": "integer"
        },
        "OwnerAccount": {
            "description": "For manual snapshots, the AWS customer account used to create or copy the snapshot. For automatic snapshots, the owner of the cluster. The owner can perform all snapshot actions, such as sharing a manual snapshot.",
            "type": "string"
        },
        "RestorableNodeTypes": {
            "description": "The list of node types that this cluster snapshot is able to restore into.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "SnapshotCreateTime": {
            "description": "The time (in UTC format) when Amazon Redshift began the snapshot. A snapshot contains a copy of the cluster data as of this exact time.",
            "type": "string"
        },
        "SnapshotRetentionStartTime": {
            "description": "A timestamp representing the start of the retention period for the snapshot.",
            "type": "string"
        },
        "SnapshotType": {
            "description": "The snapshot type. Snapshots created using CreateClusterSnapshot and CopyClusterSnapshot are of type \"manual\".",
            "type": "string"
        },
        "SourceRegion": {
            "description": "The source region from which the snapshot was copied.",
            "type": "string"
        },
        "Status": {
            "description": "The snapshot status. The value of the status depends on the API operation used.",
            "type": "string"
        },
        "TotalBackupSizeInMegaBytes": {
            "description": "The size of the complete set of backup data that would be used to restore the cluster.",
            "type": "number"
        },
        "VpcId": {
            "description": "The VPC identifier of the cluster if the snapshot is from a cluster in a VPC. Otherwise, this field is not in the output.",
            "type": "string"
        },
        "StartTime": {
            "description": "A value that requests only snapshots created at or after the specified time. The time value is specified in ISO 8601 format",
            "type": "string"
        },
        "EndTime": {
            "description": "A value that requests only snapshots created at or before the specified time. The time value is specified in ISO 8601 format",
            "type": "string"
        },
        "TagKeys": {
            "description": "A tag key or keys for which you want to return all matching cluster snapshots that are associated with the specified key or keys.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "TagValues": {
            "description": "A tag value or values for which you want to return all matching cluster snapshots that are associated with the specified tag value or values.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "ClusterExists": {
            "description": "A value that indicates whether to return snapshots only for an existing cluster.",
            "type": "boolean"
        },
        "RetentionPeriod": {
            "description": "The number of days to retain automated snapshots in the destination AWS Region after they are copied from the source AWS Region.By default, this only changes the retention period of copied automated snapshots.",
            "type": "integer"
        },
        "Manual": {
            "description": "Indicates whether to apply the snapshot retention period to newly copied manual snapshots instead of automated snapshots.",
            "type": "boolean"
        },
        "ClusterAvailabilityStatus": {
            "description": "The availability status of the cluster for queries. Possible values are Available, Unavailable, Modifying, Maintenance, Failed. ",
            "type": "string"
        },
        "ClusterNamespaceArn": {
            "description": "The namespace Amazon Resource Name (ARN) of the cluster.",
            "type": "string"
        },
        "ClusterNodes": {
            "description": "The nodes in the cluster.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "ClusterParameterGroups": {
            "description": "The list of cluster parameter groups that are associated with this cluster. Each parameter group in the list is returned with its status.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "ClusterPublicKey": {
            "description": "The public key for the cluster.",
            "type": "string"
        },
        "ClusterRevisionNumber": {
            "description": "The specific revision number of the database in the cluster.",
            "type": "string"
        },
        "ClusterNodeRole": {
            "description": "Whether the node is a leader node or a compute node.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "ClusterNodePrivateIPAddress": {
            "description": "The private IP address of a node within a cluster.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "ClusterNodePublicIPAddress": {
            "description": "The public IP address of a node within a cluster.",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "DestinationRegion": {
            "description": "The destination region that snapshots are automatically copied to when cross-region snapshot copy is enabled.",
            "type": "string"
        },
        "SnapshotCopyGrantName": {
            "description": "The name of the snapshot copy grant.",
            "type": "string"
        },
        "ClusterStatus": {
            "description": "The current state of the cluster. ",
            "type": "string"
        },
        "ClusterSubnetGroupName": {
            "description": "The name of the subnet group that is associated with the cluster. This parameter is valid only when the cluster is in a VPC. ",
            "type": "string"
        },
        "CurrentRateInMegaBytesPerSecond": {
            "description": "Describes the data transfer rate in MB's per second.",
            "type": "number"
        },
        "DataTransferredInMegaBytes": {
            "description": "Describes the total amount of data that has been transfered in MB's.",
            "type": "number"
        },
        "DataTransferProgressElapsedTimeInSeconds": {
            "description": "Describes the number of seconds that have elapsed during the data transfer.",
            "type": "number"
        },
        "EstimatedTimeToCompletionInSeconds": {
            "description": "Describes the estimated number of seconds remaining to complete the transfer.",
            "type": "number"
        },
        "DataTransferProgressStatus": {
            "description": "Describes the status of the cluster. While the transfer is in progress the status is transferring data.",
            "type": "string"
        },
        "TotalDataInMegaBytes": {
            "description": "Describes the total amount of data to be transferred in megabytes.",
            "type": "number"
        }
    },
    "additionalProperties": false,
    "required": [
    ],
    "primaryIdentifier": [
        "/properties/ClusterIdentifier"
    ],
    "readOnlyProperties": [
        "/properties/ClusterIdentifier"
    ],
    "writeOnlyProperties": [
        "/properties/MasterUserPassword",
        "/properties/SkipFinalClusterSnapshot"
    ],
    "handlers": {
        "create": {
            "permissions": [
                "initech:CreateReport"
            ]
        },
        "read": {
            "permissions": [
                "initech:DescribeReport"
            ]
        },
        "update": {
            "permissions": [
                "initech:UpdateReport"
            ]
        },
        "delete": {
            "permissions": [
                "initech:DeleteReport"
            ]
        },
        "list": {
            "permissions": [
                "initech:ListReports"
            ]
        }
    }
}
